(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["agentGame"],{9899:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"agent-game",class:{close:t.gameback}},[a("transition",{attrs:{name:"fade"}},[a("div",{staticClass:"gameroom"},[a("div",{staticClass:"tool",class:{in:t.gamestart,out:!t.gamestart}},[a("div",{staticClass:"tool-block"},[a("div"),a("div",{staticClass:"mode"},[a("div",{staticClass:"modegroup"},[a("div",{staticClass:"gameover agent",on:{click:function(e){t.gameDiscontinue=!0}}},[t._v("结束游戏")])])])])]),a("div",{staticClass:"section-one"},[a("div",{staticClass:"card-group"},t._l(t.cardsArray,(function(e){return a("div",{key:e.index,ref:"card"+e.index,refInFor:!0,staticClass:"large-card",class:{toleft:e.index<t.currentCard,toright:e.index>t.currentCard,knockout:t.knockoutPer},on:{click:function(a){return t.handleClickCard(e.index)}}},[a("div",{staticClass:"cardback agent",class:{back:!t.cardface&&t.currentCard==e.index||"out"==e.state}},[a("div",{staticClass:"cardback-block"},[a("div",{staticClass:"cardnumber"},[a("div",{staticClass:"cardnumber-block"},[a("div",{staticClass:"cardsign"},[a("svg",{staticClass:"icon-back",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-agent"}})])]),a("div",[t._v(t._s(e.index+1))]),a("div",[t._v("号")])]),a("div",{staticClass:"cardtip"},[t._v("点击查看你的词")])])])]),a("div",{staticClass:"cardfront agent",class:{back:!t.knockoutPer&&t.cardface||!t.knockoutPer&&t.currentCard!=e.index||t.knockoutPer&&"in"==e.state}},[a("div",{staticClass:"cardfront-block"},[t.knockoutPer?t._e():a("div",{staticClass:"cardword"},[t._v(t._s(e.word))]),t.knockoutPer?a("div",{staticClass:"cardposition"},[t._v(t._s(t.getPosition(e.position)))]):t._e()])])])})),0),a("div",{staticClass:"option-btn agent",class:{show:t.currentCard>=0},on:{click:t.handleViewCard}},[t._v(t._s(t.optionbtn))])])])]),a("ResultScreen",{attrs:{screen:t.gameOver,result:t.gameResult,title:t.gameResultTitle,tip:t.gameResultTip,gametype:t.gametype},on:{"update:screen":function(e){t.gameOver=e},"update:result":function(e){t.gameResult=e},"update:title":function(e){t.gameResultTitle=e},"update:tip":function(e){t.gameResultTip=e},"update:gametype":function(e){t.gametype=e},ok:t.handleGoBack}}),a("ModalScreen",{attrs:{screen:t.gameDiscontinue,gametype:t.gametype},on:{"update:screen":function(e){t.gameDiscontinue=e},"update:gametype":function(e){t.gametype=e},ok:t.handleGoBack}})],1)},i=[],n=(a("d3b7"),a("3ca3"),a("ddb0"),{name:"AgentGame",components:{ResultScreen:function(){return a.e("chunk-10f142c7").then(a.bind(null,"324d"))},ModalScreen:function(){return a.e("chunk-2d21e3c9").then(a.bind(null,"d568"))}},data:function(){return{optionbtn:"查看词语",gametype:"agent",gamestart:!1,gameback:!1,cardface:!0,currentCard:-1,cardsArray:[],knockoutPer:!1,knockoutNum:0,gameDiscontinue:!1,gameOver:!1,gameResult:null,gameResultTitle:"",gameResultTip:"",cin:0,cword:"",uin:0,uword:""}},mounted:function(){this.init()},methods:{init:function(){var t=this;this.gamestart=!0,this.cardsArray=this.$store.state.agentCards,setTimeout((function(){t.currentCard=0}),20)},handleClickCard:function(t){var e=this;if(this.knockoutPer){this.$set(this.cardsArray[t],"state","out"),this.knockoutNum++;var a=this.cardsArray[t];"c"==a.position?this.cin--:this.uin--,this.uin>0?this.cin<=1&&(this.gameResult=2,this.gameResultTitle="卧底获胜",this.gameResultTip="平民："+this.cword+"/卧底："+this.uword,setTimeout((function(){e.gameOver=!0}),500)):(this.gameResult=1,this.gameResultTitle="平民获胜",this.gameResultTip="平民："+this.cword+"/卧底："+this.uword,setTimeout((function(){e.gameOver=!0}),500))}else this.cardface=!this.cardface},handleViewCard:function(){var t=this;if(this.cardface)this.cardface=!1;else{var e=this.cardsArray[this.currentCard];if("c"==e.position?(this.cin++,this.cword=e.word):(this.uin++,this.uword=e.word),this.currentCard++,this.cardface=!0,this.currentCard==this.cardsArray.length){this.currentCard=-1;for(var a=0;a<this.cardsArray.length;a++){var s=Math.floor(a/3),i=a%3;this.$refs["card"+this.cardsArray[a].index][0].style.transform="scale(0.3, 0.3)",this.$refs["card"+this.cardsArray[a].index][0].style.transformOrigin="0 0",this.$refs["card"+this.cardsArray[a].index][0].style.top=17*s+"vh",this.$refs["card"+this.cardsArray[a].index][0].style.left=35*i+"%"}setTimeout((function(){t.knockoutPer=!0}),500)}}},getPosition:function(t){return"c"==t?"平民":"u"==t?"卧底":"b"==t?"白板":void 0},handleGoBack:function(){var t=this;this.gameback=!0,setTimeout((function(){t.$router.go(-1)}),500)}},watch:{cardface:{handler:function(){var t=this;this.cardface?setTimeout((function(){t.optionbtn="查看词语"}),200):setTimeout((function(){t.optionbtn="记住了"}),200)}}}}),r=n,c=a("2877"),o=Object(c["a"])(r,s,i,!1,null,null,null);e["default"]=o.exports}}]);